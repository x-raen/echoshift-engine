# قائمة مهام تطوير مشروع EchoShift (بصمة x-raen) - استكمال الرؤية

## 1. وحدة التحليل والتفكيك الدلالي (SDU): التعمق في فهم الاستغلالات

### 1.1. محلل الإدخال (`input_parser.py`)
- [x] دعم تنسيقات إدخال متعددة لسلاسل ROP/JOP (تم دعم SimpleText، ROPGadget، وتصميم مبدئي لـ PsfreeLapseJs).
- [x] تطوير القدرة على تحليل التعليقات التوضيحية (Annotations) في السلاسل المدخلة (تم دعم #، //، ;;).
- [x] إضافة آليات للتحقق من صحة بناء السلسلة المدخلة (تم عبر مطابقة الأنماط، مع الحفاظ على بصمة x-raen).
- [x] ضمان هيكلة مخرجات المحلل لتسهيل استهلاكها من قبل مكونات SDU الأخرى (تم، المخرجات بصيغة List[ParsedGadget]).

### 1.2. قاعدة المعرفة الدلالية للتعليمات (`iskb.py`)
- [x] تصميم مخطط دلالي شامل للتعليمات (التأثير على المسجلات، الذاكرة، تدفق التحكم، الأعلام، الآثار الجانبية) (تم بتصميم متقدم يشمل OperandEffect, ControlFlowType, SemanticAction).
- [x] تطوير آليات بناء وتوسيع القاعدة (تحليل يدوي/آلي جزئي، تكامل مع محركات تفكيك خارجية) (تم بناء قاعدة أولية قابلة للتوسيع مع دالة add_instruction_semantic).
- [x] تصميم القاعدة لدعم معماريات متعددة (مستقبلي: ARM, MIPS بالإضافة إلى x86/x64) (تم تصميم هيكل DB يدعم معماريات متعددة مع x86_64 كبداية).
- [x] تطوير واجهة استعلام فعالة (API) لـ ISKB (تم عبر دالة get_semantics).

### 1.3. محرك التنفيذ الرمزي المحدود (`bsee.py`)
- [x] تصميم هياكل بيانات لتمثيل الحالة الرمزية للنظام (تم SymbolicValue, SymbolicState مع دعم تعبيرات رمزية مبدئية).
- [x] تنفيذ منطق لمحاكاة تأثير كل تعليمة رمزيًا بناءً على ISKB (تم عبر _apply_instruction_semantics مع معالجة مبدئية لـ MOV, PUSH, POP, ADD, RET, JZ, JMP, CALL, XOR, CMP, LEA).
- [x] تطوير آليات لإدارة قيود المسار (Path Constraints) (تم إضافة self.path_conditions كخطوة أولى، تكامل SMT مستقبلي).
- [ ] دمج محلل قيود SMT (مثل Z3) للتحقق من إمكانية الوصول إلى المسارات (مهمة متقدمة، خارج نطاق الإنجاز الحالي ولكن التصميم يسمح به).
- [x] تطوير استراتيجيات لاستكشاف المسارات المحدودة (Bounded Path Exploration) (تم عبر max_steps والتحكم في تدفق التنفيذ).
- [x] تمكين BSEE من تحديد الأثر الصافي (Net Effect) لمقطع من الكود (يتم تحقيقه ضمنيًا من خلال تتبع حالة السجلات والذاكرة النهائية).

### 1.4. مجمع المقاطع الوظيفية (`fsa.py`)
- [ ] تطوير خوارزميات لتحديد "المقاطع الوظيفية" ضمن سلسلة ROP/JOP (بناءً على الأنماط، تحليل تدفق البيانات، مخرجات BSEE).
- [ ] تصميم هيكل بيانات لتمثيل كل مقطع وظيفي (الأدوات، الشرح الدلالي، شروط ما قبل وما بعد).

## 2. محرك تكافؤ الأدوات المتقدم (AGEE): إيجاد البدائل الذكية

### 2.1. خوارزميات التكافؤ (`equivalence_algorithms.py`)
- [ ] تحديد معايير واضحة للتكافؤ الدلالي بين مقاطع الأدوات.
- [ ] تطوير خوارزميات للبحث عن الأدوات المكافئة (بحث قائم على المواصفات، تركيب آلي للأدوات - متقدم، استخدام قواعد بيانات أنماط الأدوات).
- [ ] ضمان تعامل الخوارزميات مع قيود البيئة الهدف (الأحرف السيئة، محاذاة المكدس).
- [ ] تطوير آلية لتقييم وترتيب البدائل المكافئة.

### 2.2. واجهة برمجة التطبيقات (`api.py`) وإدارة قواعد بيانات الأدوات
- [ ] ضمان واجهة قوية وتدفق سلس للمعلومات بين AGEE و SDU و RPU.
- [ ] تطوير آليات لاستيراد وتحليل الأدوات من البرامج الثابتة للبيئة الهدف.
- [ ] تصميم مخطط فعال لتخزين وفهرسة الأدوات المستخرجة لتسهيل البحث السريع.

## 3. استكمال منظومة الاختبارات: ضمان الجودة والموثوقية

### 3.1. اختبارات وحدة SDU (`tests/sdu_tests/`)
- [ ] تنفيذ حالات اختبار شاملة لمحلل الإدخال (`test_sdu_parser.py`).
- [ ] تنفيذ حالات اختبار لقاعدة المعرفة الدلالية للتعليمات (`test_sdu_iskb.py`).
- [ ] تنفيذ حالات اختبار لمحرك التحليل الرمزي المحدود (`test_sdu_bsee.py`).
- [ ] تنفيذ حالات اختبار لآلية تجميع المقاطع الوظيفية (`test_sdu_fsa.py`).

### 3.2. اختبارات وحدة AGEE (`tests/agee_tests/`)
- [ ] تنفيذ حالات اختبار لخوارزميات التكافؤ (`test_agee_equivalence.py`).
- [ ] تنفيذ حالات اختبار للواجهة البرمجية لوحدة AGEE (`test_agee_api.py`).

### 3.3. اختبارات التكامل (`tests/test_integration.py`)
- [ ] تنفيذ سيناريوهات تحويل شاملة (بسيطة، معقدة، فشل متوقع).
- [ ] تطوير طرق للتحقق من الدلالة الوظيفية للسلاسل المحولة.

### 3.4. بيانات الاختبار (Test Data)
- [ ] تجميع مجموعة متنوعة من سلاسل ROP/JOP من مصادر مختلفة.
- [ ] إعداد بيئات هدف وهمية أو حقيقية (محدودة) لاختبار AGEE و RPU.

## 4. التحسينات المستقبلية (بعد استكمال النواة الوظيفية)
- [ ] تطوير واجهة مستخدم رسومية (GUI) لتسهيل التفاعل مع EchoShift.
- [ ] توسيع ISKB و AGEE لدعم معماريات إضافية (ARM, MIPS).
- [ ] دمج تقنيات تحليل برامج أكثر تقدمًا في SDU.
- [ ] استكشاف إمكانية استخدام نماذج التعلم الآلي للمساعدة في اقتراح الأدوات المكافئة.
- [ ] تعميق التكامل مع أدوات الهندسة العكسية (Ghidra, IDA Pro).

## 5. الحفاظ على بصمة x-raen الإبداعية
- [ ] الالتزام المستمر بالابتكار والجودة العالية في التصميم والتنفيذ والتوثيق.
- [ ] ضمان أن يعكس المشروع رؤية x-raen في كل مرحلة من مراحل التطوير.
